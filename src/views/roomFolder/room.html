<v-layout class="mt-5" row wrap>
    <!-- Todo: truncate it
    pop up when click button
    -->
    <v-flex sm12 md8>
        <v-container>
            <!-- Head -->
            <v-flex xs12>
                <v-card>
                    <v-layout>
                        <v-flex xs2>
                            <v-img :src="roomData.urlPicture" height="125px" contain></v-img>
                        </v-flex>
                        <v-flex xs7>
                            <v-card-title primary-title>
                                <div>
                                    <div class="headline">{{roomData.roomData.roomName}}</div>
                                    <div>{{roomData.roomData.roomDescription}}</div>
                                    <!-- <div>(2014)</div> -->
                                </div>
                            </v-card-title>
                        </v-flex>
                    </v-layout>
                    <!-- <v-divider light></v-divider>
                            <v-card-actions>
                                <v-icon>star_border</v-icon>
                            </v-card-actions> -->
                </v-card>
            </v-flex>
            <!-- Todo: @click of user have a little popup card -->
            <!-- Todo: if there is a picture have a new comp that renders it -->
            <!-- Todo: @click popup the image -->
            <!-- Room Messages -->
            <v-layout row>
                <v-flex xs12 sm12>

                    <v-container fluid grid-list-lg>
                        <v-layout row wrap xs12 sm12>
                            <v-flex xs12 v-for='msg in chatRoomMessages' :key='msg.id'>
                                <v-card @click=''>
                                    <v-layout row>
                                        <v-flex xs2 mr-0 pr-0 v-if='!isUsersMessage(msg.messageData.from.userUID)'>
                                            <v-img :src="matchUserToProfilePic(msg.messageData.from.userUID)" max-width='150px'
                                                height="75px" contain mr-0 pr-0></v-img>
                                        </v-flex>

                                        <v-flex xs10>
                                            <v-card-title primary-title>
                                                <v-img max-width='300px' v-if='msg.messageData.messagePictureURL != null'
                                                    :src="msg.messageData.messagePictureURL" aspect-ratio="2.75" @click='imagePopUp(msg.messageData.messagePictureURL)'></v-img>
                                                <div v-if='msg.messageData.newMessage'>{{msg.messageData.newMessage}}</div>
                                            </v-card-title>
                                        </v-flex>

                                        <v-flex xs2 v-if='isUsersMessage(msg.messageData.from.userUID)'>
                                            <v-img :src="matchUserToProfilePic(msg.messageData.from.userUID)" max-width='150px'
                                                height="75px" contain mr-0 pr-0></v-img>
                                        </v-flex>

                                    </v-layout>
                                </v-card>
                            </v-flex>
                        </v-layout>
                    </v-container>

                </v-flex>
            </v-layout>

            <!-- Todo: Figure out how hover works -->
            <!-- Todo: Once there is a picture have it set as blue -->
            <!-- Send Messages -->
            <v-form @submit.prevent='sendMessage'>
                <v-container>
                    <!-- Todo: have both of these in the same row -->
                    <v-flex xs12 id="dropdown-example" grid-list-xl>

                        <v-layout row wrap>
                            <v-hover>
                                <v-icon medium @click="attachImage = !attachImage" slot-scope="{ hover }">
                                    attach_file
                                </v-icon>
                            </v-hover>

                            <v-text-field v-model.trim='newMessage' :counter="500" label="Message" required></v-text-field>
                            <v-btn type='submit'>submit</v-btn>
                        </v-layout>

                    </v-flex>
                </v-container>
            </v-form>
        </v-container>
    </v-flex>

    <!-- Todo: Have a collapsable -->
    <!-- Todo: Make this follow -->
    <v-flex sm12 md4>
        <v-container>
            <v-layout row>

                <v-flex xs12 sm12>
                    <v-card>

                        <v-toolbar color="indigo" dark>
                            <v-toolbar-title>Users In Room</v-toolbar-title>
                        </v-toolbar>
                        <!-- Messages -->
                        <v-list>
                            <v-list-tile v-for='user in roomData.roomData.users' :key='user.userUID' avatar @click="">

                                <v-list-tile-content>
                                    <v-list-tile-title v-text="user.userName"></v-list-tile-title>
                                </v-list-tile-content>

                                <v-list-tile-avatar>
                                    <img :src="user.userProfileImage || defaultUser">
                                </v-list-tile-avatar>

                            </v-list-tile>
                        </v-list>

                    </v-card>
                </v-flex>
            </v-layout>
        </v-container>

    </v-flex>

    <v-dialog v-model="attachImage" max-width='1000px' max-height='1000px'>
        <!-- ? add the image on the card -->
        <v-card>
            <v-container>
                <div class="custom-file mx-auto my-2" v-if="!attachmentPicture">
                    <input type="file" class="custom-file-input form-control" id="customFile" @change="onFileChange">
                    <label class="custom-file-label">Upload Picture</label>
                </div>

                <div v-else>
                    <v-img :src="attachmentPicture" aspect-ratio="1.778" max-width='500px' max-height='500px'></v-img>
                    <v-btn color="red darken-1" @click="removeImage" class="white--text"> Remove image</v-btn>
                </div>
            </v-container>

            <v-card-actions>
                <v-spacer></v-spacer>
                <v-btn color="green darken-1" flat @click="attachImage = false">Close</v-btn>
                <v-btn type='submit' color="blue darken-1" flat @click="sendMessage">Submit</v-btn>
            </v-card-actions>

        </v-card>
    </v-dialog>

    <!-- <v-dialog v-model='seeImage.show' max-width='1000px' max-height='1000px'>
        <v-card v-if='seeImage.show'>
            <v-container>
                <v-img :src="seeImage.imageUrl" aspect-ratio="1.778" max-width='500px' max-height='500px'></v-img>
            </v-container>

            <v-card-actions>
                <v-spacer></v-spacer>
                <v-btn color="green darken-1" flat @click="seeImage.show = false">Close</v-btn>

            </v-card-actions>
        </v-card>
    </v-dialog> -->
    <!-- Use this when uploading pic -->
    <!-- <v-progress-circular indeterminate color="primary"></v-progress-circular>-->
</v-layout>